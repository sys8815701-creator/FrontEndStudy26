<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>소셜 미디어 피드</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body {
            background-color: #fafafa;
        }
        .feed-container {
            max-width: 600px;
            margin: 20px auto;
        }
        .post-card {
            margin-bottom: 20px;
            border: 1px solid #dbdbdb;
            border-radius: 8px;
            background: white;
        }
        .post-header {
            display: flex;
            align-items: center;
            padding: 14px 16px;
        }
        .profile-img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin-right: 12px;
        }
        .username {
            font-weight: 600;
            font-size: 14px;
        }
        .post-image {
            width: 100%;
            display: block;
        }
        .post-actions {
            padding: 8px 16px;
        }
        .action-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            margin-right: 8px;
        }
        .action-btn.liked {
            color: #ed4956;
        }
        .like-count {
            padding: 0 16px;
            font-weight: 600;
            font-size: 14px;
        }
        .post-caption {
            padding: 0 16px;
            margin-bottom: 8px;
        }
        .post-time {
            padding: 0 16px 12px;
            font-size: 12px;
            color: #8e8e8e;
        }
        .comment-section {
            border-top: 1px solid #efefef;
            padding: 12px 16px;
            display: none;
        }
        .comment-input {
            border: none;
            outline: none;
            width: 100%;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="feed-container">
        <!-- 게시물 카드 -->
        <div class="post-card">
            <!-- 헤더: 프로필 정보 -->
            <div class="post-header">
                <img src="https://via.placeholder.com/32" alt="프로필" class="profile-img">
                <span class="username">kim_developer</span>
            </div>

            <!-- 이미지 -->
            <img src="https://via.placeholder.com/600x600" alt="게시물" class="post-image">

            <!-- 액션 버튼 -->
            <div class="post-actions">
                <button class="action-btn like-btn">
                    <i class="bi bi-heart"></i>
                </button>
                <button class="action-btn comment-btn">
                    <i class="bi bi-chat"></i>
                </button>
                <button class="action-btn share-btn">
                    <i class="bi bi-send"></i>
                </button>
            </div>

            <!-- 좋아요 수 -->
            <div class="like-count">
                좋아요 <span class="like-number">42</span>개
            </div>

            <!-- 본문 -->
            <div class="post-caption">
                <strong>kim_developer</strong> 부트스트랩으로 SNS 피드 만들기 성공!
            </div>

            <!-- 게시 시간 -->
            <div class="post-time">
                1시간 전
            </div>

            <!-- 댓글 입력 -->
            <div class="comment-section">
                <input type="text" class="comment-input" placeholder="댓글 달기...">
            </div>
        </div>
    </div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script>
$(document).ready(function() {
    // 좋아요 버튼 클릭
    $('.like-btn').click(function() {
        const $btn = $(this);
        const $icon = $btn.find('i');
        const $likeNumber = $btn.closest('.post-card').find('.like-number');
        let currentLikes = parseInt($likeNumber.text());

        if ($btn.hasClass('liked')) {
            // 좋아요 취소
            $icon.removeClass('bi-heart-fill').addClass('bi-heart');
            $btn.removeClass('liked');
            $likeNumber.text(currentLikes - 1);
        } else {
            // 좋아요
            $icon.removeClass('bi-heart').addClass('bi-heart-fill');
            $btn.addClass('liked');
            $likeNumber.text(currentLikes + 1);

            // 하트 애니메이션 효과
            $btn.css('transform', 'scale(1.2)');
            setTimeout(function() {
                $btn.css('transform', 'scale(1)');
            }, 200);
        }
    });

    // 댓글 버튼 클릭
    $('.comment-btn').click(function() {
        const $commentSection = $(this).closest('.post-card').find('.comment-section');
        $commentSection.slideToggle(300, function() {
            if ($commentSection.is(':visible')) {
                $commentSection.find('.comment-input').focus();
            }
        });
    });

    // 댓글 입력 (엔터키)
    $('.comment-input').on('keydown', function(e) {
        if (e.key === 'Enter' && $(this).val().trim() !== '') {
            const comment = $(this).val();
            const $caption = $(this).closest('.post-card').find('.post-caption');

            // 댓글 추가
            $caption.after(
                '<div class="post-caption">' +
                '<strong>you</strong> ' + comment +
                '</div>'
            );

            $(this).val('');
            alert('댓글이 등록되었습니다!');
        }
    });
});
</script>
<script>
$(document).ready(function() {
    let postCount = 1; // 현재 게시물 수
    let isLoading = false; // 로딩 중 플래그

    // 게시물 생성 함수
    function createPost(index) {
        const usernames = ['kim_developer', 'park_mentor', 'lee_designer', 'choi_planner'];
        const captions = [
            '부트스트랩으로 SNS 피드 만들기 성공!',
            '오늘의 코딩 일지',
            '새로운 프로젝트 시작!',
            '개발자의 일상'
        ];

        const username = usernames[index % usernames.length];
        const caption = captions[index % captions.length];
        const likes = Math.floor(Math.random() * 100) + 10;

        return `
            <div class="post-card">
                <div class="post-header">
                    <img src="https://via.placeholder.com/32" alt="프로필" class="profile-img">
                    <span class="username">${username}</span>
                </div>
                <img src="https://via.placeholder.com/600x600?text=Post+${index + 1}" alt="게시물" class="post-image">
                <div class="post-actions">
                    <button class="action-btn like-btn">
                        <i class="bi bi-heart"></i>
                    </button>
                    <button class="action-btn comment-btn">
                        <i class="bi bi-chat"></i>
                    </button>
                    <button class="action-btn share-btn">
                        <i class="bi bi-send"></i>
                    </button>
                </div>
                <div class="like-count">
                    좋아요 <span class="like-number">${likes}</span>개
                </div>
                <div class="post-caption">
                    <strong>${username}</strong> ${caption}
                </div>
                <div class="post-time">
                    ${index + 1}시간 전
                </div>
                <div class="comment-section">
                    <input type="text" class="comment-input" placeholder="댓글 달기...">
                </div>
            </div>
        `;
    }

    // 초기 게시물 3개 추가
    for (let i = 1; i < 3; i++) {
        $('.feed-container').append(createPost(i));
        postCount++;
    }

    // 무한 스크롤
    $(window).scroll(function() {
        if (isLoading) return;

        const scrollTop = $(window).scrollTop();
        const windowHeight = $(window).height();
        const documentHeight = $(document).height();

        // 하단에서 200px 전에 도달하면 로드
        if (scrollTop + windowHeight > documentHeight - 200) {
            isLoading = true;

            // 로딩 표시
            $('.feed-container').append('<div class="text-center my-3 loading">로딩 중...</div>');

            // 1초 후 새 게시물 추가 (실제로는 API 호출)
            setTimeout(function() {
                $('.loading').remove();

                // 새 게시물 2개 추가
                for (let i = 0; i < 2; i++) {
                    $('.feed-container').append(createPost(postCount));
                    postCount++;
                }

                isLoading = false;
            }, 1000);
        }
    });

    // 이벤트 위임으로 동적 요소에도 이벤트 적용
    $('.feed-container').on('click', '.like-btn', function() {
        const $btn = $(this);
        const $icon = $btn.find('i');
        const $likeNumber = $btn.closest('.post-card').find('.like-number');
        let currentLikes = parseInt($likeNumber.text());

        if ($btn.hasClass('liked')) {
            $icon.removeClass('bi-heart-fill').addClass('bi-heart');
            $btn.removeClass('liked');
            $likeNumber.text(currentLikes - 1);
        } else {
            $icon.removeClass('bi-heart').addClass('bi-heart-fill');
            $btn.addClass('liked');
            $likeNumber.text(currentLikes + 1);
        }
    });

    $('.feed-container').on('click', '.comment-btn', function() {
        const $commentSection = $(this).closest('.post-card').find('.comment-section');
        $commentSection.slideToggle(300, function() {
            if ($commentSection.is(':visible')) {
                $commentSection.find('.comment-input').focus();
            }
        });
    });
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원 관리 시스템</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">회원 관리</h2>

        <!-- 검색 및 제어 영역 -->
        <div class="row mb-3">
            <div class="col-md-6">
                <input type="text" id="searchInput" class="form-control"
                       placeholder="이름 또는 이메일로 검색...">
            </div>
            <div class="col-md-6 text-end">
                <span class="text-muted">전체 <span id="totalCount">0</span>명</span>
            </div>
        </div>

        <!-- 데이터 테이블 -->
        <div class="table-responsive">
            <table class="table table-hover table-striped">
                <thead class="table-dark">
                    <tr>
                        <th style="cursor: pointer;" data-column="id">
                            번호 <span class="sort-icon">↕</span>
                        </th>
                        <th style="cursor: pointer;" data-column="name">
                            이름 <span class="sort-icon">↕</span>
                        </th>
                        <th style="cursor: pointer;" data-column="email">
                            이메일 <span class="sort-icon">↕</span>
                        </th>
                        <th style="cursor: pointer;" data-column="date">
                            가입일 <span class="sort-icon">↕</span>
                        </th>
                        <th>상태</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- 데이터가 여기에 동적으로 추가됩니다 -->
                </tbody>
            </table>
        </div>

        <!-- 페이지네이션 -->
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center" id="pagination">
                <!-- 페이지 버튼이 여기에 동적으로 추가됩니다 -->
            </ul>
        </nav>
    </div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script>
// 샘플 회원 데이터
let members = [
    { id: 1, name: "김철수", email: "kim@example.com", date: "2024-01-15", status: "active" },
    { id: 2, name: "이영희", email: "lee@example.com", date: "2024-02-20", status: "active" },
    { id: 3, name: "박민수", email: "park@example.com", date: "2024-01-10", status: "inactive" },
    { id: 4, name: "정수진", email: "jung@example.com", date: "2024-03-05", status: "active" },
    { id: 5, name: "최동욱", email: "choi@example.com", date: "2024-02-28", status: "active" },
    { id: 6, name: "강민지", email: "kang@example.com", date: "2024-01-25", status: "inactive" },
    { id: 7, name: "윤서준", email: "yoon@example.com", date: "2024-03-12", status: "active" },
    { id: 8, name: "조은지", email: "jo@example.com", date: "2024-02-15", status: "active" }
];

// 전역 변수
let filteredMembers = [...members]; // 필터링된 결과를 저장
let currentPage = 1;
const itemsPerPage = 5; // 한 페이지당 표시할 항목 수
let sortColumn = 'id';
let sortDirection = 'asc';

// 테이블 렌더링 함수
function renderTable() {
    const tableBody = document.getElementById('tableBody');
    const start = (currentPage - 1) * itemsPerPage;
    const end = start + itemsPerPage;
    const pageData = filteredMembers.slice(start, end);

    tableBody.innerHTML = '';

    pageData.forEach(member => {
        const statusBadge = member.status === 'active'
            ? '<span class="badge bg-success">활성</span>'
            : '<span class="badge bg-secondary">비활성</span>';

        const row = `
            <tr>
                <td>${member.id}</td>
                <td>${member.name}</td>
                <td>${member.email}</td>
                <td>${member.date}</td>
                <td>${statusBadge}</td>
            </tr>
        `;
        tableBody.innerHTML += row;
    });

    document.getElementById('totalCount').textContent = filteredMembers.length;
    renderPagination();
}

// 페이지네이션 렌더링
function renderPagination() {
    const pagination = document.getElementById('pagination');
    const totalPages = Math.ceil(filteredMembers.length / itemsPerPage);

    pagination.innerHTML = '';

    // 이전 버튼
    const prevDisabled = currentPage === 1 ? 'disabled' : '';
    pagination.innerHTML += `
        <li class="page-item ${prevDisabled}">
            <a class="page-link" href="#" onclick="changePage(${currentPage - 1}); return false;">이전</a>
        </li>
    `;

    // 페이지 번호
    for (let i = 1; i <= totalPages; i++) {
        const active = i === currentPage ? 'active' : '';
        pagination.innerHTML += `
            <li class="page-item ${active}">
                <a class="page-link" href="#" onclick="changePage(${i}); return false;">${i}</a>
            </li>
        `;
    }

    // 다음 버튼
    const nextDisabled = currentPage === totalPages ? 'disabled' : '';
    pagination.innerHTML += `
        <li class="page-item ${nextDisabled}">
            <a class="page-link" href="#" onclick="changePage(${currentPage + 1}); return false;">다음</a>
        </li>
    `;
}

// 페이지 변경 함수
function changePage(page) {
    const totalPages = Math.ceil(filteredMembers.length / itemsPerPage);
    if (page < 1 || page > totalPages) return;
    currentPage = page;
    renderTable();
}

// 초기 렌더링
renderTable();

// 정렬 함수
function sortTable(column) {
    if (sortColumn === column) {
        // 같은 열을 다시 클릭하면 방향 전환
        sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
    } else {
        sortColumn = column;
        sortDirection = 'asc';
    }

    filteredMembers.sort((a, b) => {
        let valueA = a[column];
        let valueB = b[column];

        // 숫자 비교
        if (typeof valueA === 'number') {
            return sortDirection === 'asc' ? valueA - valueB : valueB - valueA;
        }

        // 문자열 비교
        if (sortDirection === 'asc') {
            return valueA.localeCompare(valueB);
        } else {
            return valueB.localeCompare(valueA);
        }
    });

    currentPage = 1; // 정렬 후 첫 페이지로
    renderTable();
    updateSortIcons();
}

// 정렬 아이콘 업데이트
function updateSortIcons() {
    document.querySelectorAll('.sort-icon').forEach(icon => {
        icon.textContent = '↕';
    });

    const activeHeader = document.querySelector(`th[data-column="${sortColumn}"] .sort-icon`);
    if (activeHeader) {
        activeHeader.textContent = sortDirection === 'asc' ? '↑' : '↓';
    }
}

// 테이블 헤더에 클릭 이벤트 추가
document.querySelectorAll('th[data-column]').forEach(header => {
    header.addEventListener('click', function() {
        const column = this.getAttribute('data-column');
        sortTable(column);
    });
});
</script>
</body>
</html>